<div id="title" class="center" >
  <h1>Gestion Des Utilisateurs</h1>
  </div>
<div class="btn_ajout">
<button type="button"   data-toggle="modal" data-target="#form-add-personne" class=" btn btn btn-success"><i class="fa fa-plus"></i>Ajouter des Personnes</button>
</div>
<div class="center" ><input class="input" matInput (keyup)="applyFilter($event)"  placeholder="Chercher une personne" #input></div>

<div class="center">
    
  <table>
    <tr id="header">
        <th>FirstName </th>
        <th>LastName</th>
        <th>Cin</th>
        <th>Adresse</th>
        <th>Activation</th>
        <th>Role</th>
        <th>ServiceDepartment</th>
        <th>Action</th>
        <th></th>
    </tr>
    <tr *ngFor="let group of data">
        <td> {{group.firstName}} </td>
        <td>{{group.lastName}} </td>
        <td> {{group.cin}} </td>
        <td>{{group.adresse}}  </td>
        <td>{{group.activation}} </td>
        <td>{{group.libelle_Role}} </td>
        <td>{{group.libelle_service}} </td>
        <td><button class="btn btn-primary"><i class="fa fa-edit"></i></button></td>
        <td><button (click)="DeletePerson(group.iD_person)" class="btn btn-danger"><i class="fa fa-trash"></i></button> </td>
        
    </tr>
</table>

    </div>

    <div data-backdrop="false" class="modal fade" id="form-add-personne"  role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header bg-primary text-white ">
              <h5 class="modal-title" id="exampleModalLabel">Details du personne</h5>
              <button class="bg-white text-white" type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="exform" class = 'normal-form' (ngSubmit)="addPersonne()" #PersonneAdd="ngForm" >
                    <div class="form-group row">
                        <label  class="col-sm-4 col-form-label">Prénom :</label>
                        <div class="col-sm-7">
                          <input  formControlName="FirstName" matInput name = "First_name" 
                           type="text"  class="form-control"  placeholder="Prénom">
                          <mat-error *ngIf="FirstName?.invalid && FirstName?.touched"> Entrez votre Prénom </mat-error>
                        </div>
                      </div> 
                      <div class="form-group row">
                        <label  class="col-sm-4 col-form-label">Nom :</label>
                        <div class="col-sm-7">
                          <input  formControlName="lastName" matInput name = LastName
                         type="text"  class="form-control"  placeholder="Nom">
                          <mat-error *ngIf="lastName?.invalid && lastName?.touched">Entrez votre nom  </mat-error>
                        </div>
                      </div> 
                      <div class="form-group row">
                        <label  class="col-sm-4 col-form-label">Email :</label>
                        <div class="col-sm-7">
                          <input formControlName="login" matInput name = Login
                           type="text"  class="form-control"  placeholder="Email">
                          <mat-error *ngIf="login?.invalid && login?.touched">Email est requis </mat-error>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label  class="col-sm-4 col-form-label">Mot de passe :</label>
                        <div class="col-sm-7">
                          <input formControlName="password" name="Password"  matInput [type]="hide ? 'password' : 'text'">
                          <i class="material-icons" matSuffix (click)="hide = !hide">
                            {{hide ? 'visibility':'visibility_off'}}
                          </i>
                          <mat-error *ngIf="password?.invalid && password?.touched">Entrez votre mot de passe </mat-error>
                        </div>
                      </div>
                     
                       <div class="form-group row">
                        <label  class="col-sm-4 col-form-label">Cin :</label>
                        <div class="col-sm-7">
                          <input formControlName="cin" matInput name = Cin
                           type="text"  class="form-control"  placeholder="cin">
                          <mat-error *ngIf="cin?.invalid && cin?.touched">Cin est requis </mat-error>
                          <mat-error *ngIf="exform.controls['cin'].errors?.minlength && exform.controls['cin'].errors?.maxlength">Minimum 8 caractères requis.</mat-error>
                          
                        </div>
                      </div>
                      <div class="form-group row">
                        <label  class="col-sm-4 col-form-label">Adresse :</label>
                        <div class="col-sm-7">
                          <input formControlName="adresse" matInput name = Adresse
                           type="text" class="form-control"  placeholder="Adresse">
                          <mat-error *ngIf="adresse?.invalid && adresse?.touched">Adresse est requis </mat-error>
                        </div>
                      </div>
                
                      <div class="form-group row">
                        <label  class="col-sm-4 col-form-label">Role :</label>
                        <div class="col-sm-7">
                          <select name = Role formControlName="fk_Role"
                           type="text" class="form-control"  >
                           <option >Choisir votre role </option>
                          <option *ngFor="let role of dataRole" [value]="role.iD_Role">{{role.libelle_Role}}</option>
                      
                          </select>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label  class="col-sm-4 col-form-label">Service Department :</label>
                        <div class="col-sm-7">
                          <select name = ServiceDepartment formControlName="fk_serviceDepartment"
                           type="text" class="form-control"  >
                           <option >Choisir un service </option>
                           <option *ngFor="let serviceDepartment of dataService" [value]="serviceDepartment.iD_ServiceDepartment">{{serviceDepartment.libelle_service}}</option>
                          </select>
                        </div>
                      </div>
                  
                      <div class="form-group row">
                        <label  class="col-sm-4 col-form-label">Activation :</label>
                        <div class="col-sm-7">
                          <input name = Activation
                           type="checkbox" class="form-control" formControlName="Activation"  >
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                        <button type="submit" class="btn btn-primary" [disabled]="exform.invalid">Ajouter personne</button>
                      </div>
                   
                  </form>
            </div>
          
          </div>
        </div>
  